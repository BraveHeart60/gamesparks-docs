title: Spark
link: https://docs.gamesparks.net/documentation/cloud-code-api/spark-cloud-code-api/spark
author: gabriel.page
description: 
post_id: 2396
created: 2014/05/08 10:39:03
created_gmt: 2014/05/08 10:39:03
comment_status: closed
post_name: spark
status: publish
post_type: post

<!--The Spark object that is available to all scripts is the entry point into the GameSparks API. -->

# Spark

[toc] 

The Spark object that is available to all scripts is the entry point into the GameSparks API.

It can be used for getting access to objects and functions within the GameSparks platform.

This interface is available in all scripts using the notation "Spark."

e.g.

To return a JSON representation of the Object being acted upon
    
    
    var data = Spark.getData();

* * *

### getPlayer

**signature** getPlayer()

**returns** [SparkPlayer](../Spark/SparkPlayer)

**validity** All except Global Message Scripts

Returns a SparkPlayer object that represents the player who either sent, or is going to receive the object that is invoking this script.

**example**
    
    
    var player = Spark.getPlayer();

* * *

### loadPlayer

**signature** loadPlayer(string playerId)

**returns** [SparkPlayer](../Spark/SparkPlayer)

**validity** All Scripts

Returns a SparkPlayer object that represents the player with the supplied ID.

**params**

playerId - the unique player identifier.

**example**
    
    
    var player = Spark.loadPlayer(myplayerid);

* * *

### getChallenge

**signature** getChallenge(string challengeInstanceId)

**returns** [SparkChallenge](../Spark/SparkChallenge)

**validity** All Scripts

Allows a script to load a SparkChallenge object by it's ID.

This is mainly used on LogChallengeEventRequests where the ID of the SparkChallenge can be retrieved using Spark.data.challengeId.

**params**

challengeInstanceId - the unique challenge identifier.

**example**
    
    
    var myChallenge = Spark.getChallenge(Spark.data.challengeId);

* * *

### sendMessage

**signature** sendMessage(JSON data, [SparkPlayer](../Spark/SparkPlayer)[] players)

**returns** void

**validity** All Scripts

Sends a ScriptMessage to one or more spark Players.

The 'data' attribute of the SparkMessage will match the data parameter supplied.

**params**

data - the JSON Data to send.

players - the SparkPlayer array to send the message to.

**example**
    
    
    Spark.sendMessage({"alert" : "You've just won a car!"}, myplayers);

* * *

### sendMessageExt

**signature** sendMessageExt(JSON data, string extCode, [SparkPlayer](../Spark/SparkPlayer)[] players)

**returns** void

**validity** All Scripts

Sends a ScriptMessage to one or more spark Players.

The 'data' attribute of the SparkMessage will match the data parameter supplied.

The extCode parameter will be used to look up the configuration for the message from ScriptMessage Extensions

**params**

data - the JSON Data to send.

extCode - The short code of the ScriptMessage extension, if not found, the default ScriptMessage will be used.

players - the SparkPlayer array to send the message to. If empty or null no message will be sent.

**example**
    
    
    Spark.sendMessageExt({"alert" : "You've just won a car!"},"CODE1" ,myplayers);

* * *

### sendMessageWithoutPush

**signature** sendMessageWithoutPush(JSON data, [SparkPlayer](../Spark/SparkPlayer)[] players)

**returns** void

**validity** All Scripts

Sends a ScriptMessage to one or more spark Players. Push notifications will be supressed for this message

The 'data' attribute of the SparkMessage will match the data parameter supplied.

**params**

data - the JSON Data to send.

players - the SparkPlayer array to send the message to.

**example**
    
    
    Spark.sendMessage({"alert" : "You've just won a car!"}, myplayers);

* * *

### sendMessageById

**signature** sendMessageById(JSON data, string[] playerIds)

**returns** void

**validity** All Scripts

Sends a ScriptMessage to one or more spark Players.

The 'data' attribute of the SparkMessage will match the data parameter supplied.

**params**

data - the JSON Data to send.

playerIds - An array of player id strings to send the message to.

**example**
    
    
    Spark.sendMessage({"alert" : "You've just won a car!"}, myplayerids);

* * *

### sendMessageByIdExt

**signature** sendMessageByIdExt(JSON data, string extCode, string[] playerIds)

**returns** void

**validity** All Scripts

Sends a ScriptMessage to one or more spark Players.

The 'data' attribute of the SparkMessage will match the data parameter supplied.

The extCode parameter will be used to look up the configuration for the message from ScriptMessage Extensions

**params**

data - the JSON Data to send.

extCode - The short code of the ScriptMessage extension, if not found, the default ScriptMessage will be used.

playerIds - An array of player id strings to send the message to.

**example**
    
    
    Spark.sendMessage({"alert" : "You've just won a car!"}, myplayerids);

* * *

### sendMessageByIdWithoutPush

**signature** sendMessageByIdWithoutPush(JSON data, string[] playerIds)

**returns** void

**validity** All Scripts

Sends a ScriptMessage to one or more spark Players.

The 'data' attribute of the SparkMessage will match the data parameter supplied. Push notifications will be supressed for this message

**params**

data - the JSON Data to send.

playerIds - An array of player id strings to send the message to.

**example**
    
    
    Spark.sendMessage({"alert" : "You've just won a car!"}, myplayerids);

* * *

### message

**signature** message(string extCode)

**returns** [SparkMessage](../Utils/SparkMessage)

**validity** All Scripts

Creates a SparkMessage object using the default configuration from the portal.

Providing an ext code allows different configurations to be used as th template.

**params**

extCode - (Optional) The extCode of a scriptMessageExtension, if null or not found the standard ScriptMessage configuration will be used.

**returns**

a SparkMessageobject

**example**
    
    
    Spark.message("myExtCode"));

* * *

### save

**signature** save(string collectionName, JSON document)

**returns** boolean

**validity** All Scripts

Saves a document to the named collection.

**params**

collectionName - the collection name to save the document to.

document - the document to save. If the document contains and _id field, and the collection already contains a document with the same _id it will be updated.

**returns**

true if the save was successful, false if there was an error

**example**
    
    
    Spark.save("myCollection", {"key":"value"});

* * *

### remove